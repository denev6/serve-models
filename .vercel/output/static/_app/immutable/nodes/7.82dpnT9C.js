import{d as P,t as h,a as u}from"../chunks/BaJEzMtw.js";import"../chunks/Dek7PPcY.js";import{p as R,s as l,f as T,t as v,a as k,a2 as c,ap as _,c as f,r as g,i as n}from"../chunks/q-7iqr8h.js";import{s as L}from"../chunks/D6ngW7ju.js";import{i as O}from"../chunks/BwwZvEgN.js";import{s as x}from"../chunks/DWfCLr6h.js";import{i as D}from"../chunks/Dr2HJf6E.js";import{g as q}from"../chunks/BXTzUivX.js";import{T as A}from"../chunks/ClrUV_SQ.js";var E=h('<div class="image-container svelte-gu96q3"><div><h3>Selected Image</h3> <img alt="" class="svelte-gu96q3"></div></div>'),j=h('<h1>POST an Image</h1> <input type="file" accept="image/*"> <button> </button> <!>',1);function M(b,w){R(w,!1);let t,m=_(""),r=_(!1);function y(a){const e=a.target.files[0];e&&(t=e,c(m,URL.createObjectURL(t)))}async function S(){if(!t){alert("Please select an image first.");return}c(r,!0);const a=new FormData;a.append("image",t);try{const e=await fetch(`${A}/image`,{method:"POST",body:a});if(!e.ok)throw new Error("Failed to process image");const o=await e.blob(),i=new FileReader;i.readAsDataURL(o),i.onload=()=>{sessionStorage.setItem("img",JSON.stringify({image:i.result,name:t.name})),q("/test/img-post/result")}}catch(e){console.log(e)}finally{c(r,!1)}}D();var p=j(),d=l(T(p),2);d.__change=y;var s=l(d,2);s.__click=S;var U=f(s,!0);g(s);var F=l(s,2);{var I=a=>{var e=E(),o=f(e),i=l(f(o),2);g(o),g(e),v(()=>x(i,"src",n(m))),u(a,e)};O(F,a=>{n(m)&&a(I)})}v(()=>{s.disabled=n(r),L(U,n(r)?"Processing...":"Upload")}),u(b,p),k()}P(["change","click"]);export{M as component};
