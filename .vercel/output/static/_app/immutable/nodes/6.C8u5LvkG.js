import{d as R,t as b,a as v}from"../chunks/vMUy-l4-.js";import"../chunks/CTd9Z4B1.js";import{p as k,s as l,f as L,t as _,a as O,a7 as c,ac as h,c as f,r as p,l as n}from"../chunks/BmosVzqU.js";import{s as x}from"../chunks/BIkekS2W.js";import{i as A}from"../chunks/B-pjV1An.js";import{s as D}from"../chunks/B8RWNBdP.js";import{i as q}from"../chunks/2_8oiVJZ.js";import{p as E}from"../chunks/C6th5xYc.js";import{g as T}from"../chunks/DDEkrzKO.js";var j=b('<div class="image-container svelte-gu96q3"><div><h3>Selected Image</h3> <img alt="" class="svelte-gu96q3"></div></div>'),B=b('<h1>POST an Image</h1> <input type="file" accept="image/*"> <button> </button> <!>',1);function W(U,d){k(d,!1);const w=E(d,"data",8)().apiUrl;let t,m=h(""),s=h(!1);function y(e){const a=e.target.files[0];a&&(t=a,c(m,URL.createObjectURL(t)))}async function S(){if(!t){alert("Please select an image first.");return}c(s,!0);const e=new FormData;e.append("image",t);try{const a=await fetch(w+"/image",{method:"POST",body:e});if(!a.ok)throw new Error("Failed to process image");const o=await a.blob(),i=new FileReader;i.readAsDataURL(o),i.onload=()=>{sessionStorage.setItem("img",JSON.stringify({image:i.result,name:t.name})),T("/img-post/result")}}catch(a){alert(a)}finally{c(s,!1)}}q();var g=B(),u=l(L(g),2);u.__change=y;var r=l(u,2);r.__click=S;var F=f(r,!0);p(r);var I=l(r,2);{var P=e=>{var a=j(),o=f(a),i=l(f(o),2);p(o),p(a),_(()=>D(i,"src",n(m))),v(e,a)};A(I,e=>{n(m)&&e(P)})}_(()=>{r.disabled=n(s),x(F,n(s)?"Processing...":"Upload")}),v(U,g),O()}R(["change","click"]);export{W as component};
