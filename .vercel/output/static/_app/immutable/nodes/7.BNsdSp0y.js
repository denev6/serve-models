import{t as _,a as u}from"../chunks/DBumpeCZ.js";import"../chunks/BnESbU3h.js";import{p as T,s as l,f as k,t as v,a as I,a2 as c,aq as h,c as p,r as f,i as n}from"../chunks/BWXxTf8G.js";import{d as L,s as P}from"../chunks/BVVBNkK6.js";import{i as q}from"../chunks/Sh6D9Sbw.js";import{s as x}from"../chunks/BSYsJ7yg.js";import{i as D}from"../chunks/2vKxcCzR.js";import{g as O}from"../chunks/CcmEtpdP.js";import{T as A}from"../chunks/ClrUV_SQ.js";var E=_('<div class="image-container svelte-gu96q3"><div><h3>Selected Image</h3> <img alt="" class="svelte-gu96q3"></div></div>'),j=_(`<h1>This page is used to test the local server.</h1> <p>My plan doesn't support Serverless functionsðŸ˜…</p> <input type="file" accept="image/*"> <button> </button> <!>`,1);function K(b,y){T(y,!1);let a,m=h(""),i=h(!1);function w(t){const e=t.target.files[0];e&&(a=e,c(m,URL.createObjectURL(a)))}async function S(){if(!a){alert("Please select an image first.");return}c(i,!0);const t=new FormData;t.append("image",a);try{const e=await fetch(`${A}/image`,{method:"POST",body:t});if(!e.ok)throw new Error("Failed to process image");const o=await e.blob(),r=new FileReader;r.readAsDataURL(o),r.onload=()=>{sessionStorage.setItem("img",JSON.stringify({image:r.result,name:a.name})),O("/test/img-post/result")}}catch(e){console.log(e)}finally{c(i,!1)}}D();var g=j(),d=l(k(g),4);d.__change=w;var s=l(d,2);s.__click=S;var U=p(s,!0);f(s);var F=l(s,2);{var R=t=>{var e=E(),o=p(e),r=l(p(o),2);f(o),f(e),v(()=>x(r,"src",n(m))),u(t,e)};q(F,t=>{n(m)&&t(R)})}v(()=>{s.disabled=n(i),P(U,n(i)?"Processing...":"Upload")}),u(b,g),I()}L(["change","click"]);export{K as component};
