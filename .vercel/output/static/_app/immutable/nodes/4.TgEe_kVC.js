import{t as h,a as v,b as N}from"../chunks/DBumpeCZ.js";import"../chunks/BnESbU3h.js";import{p as G,aq as m,s as u,f as H,c as _,t as b,a as J,a2 as o,i as r,r as f,z as U}from"../chunks/BWXxTf8G.js";import{d as K,s as x}from"../chunks/BVVBNkK6.js";import{i as O}from"../chunks/Sh6D9Sbw.js";import{e as Q,i as V}from"../chunks/DS_Z9qIP.js";import{s as W}from"../chunks/BSYsJ7yg.js";import{i as X}from"../chunks/2vKxcCzR.js";import{A as Y}from"../chunks/ClrUV_SQ.js";function Z(a,i,s){if(s){if(a.classList.contains(i))return;a.classList.add(i)}else{if(!a.classList.contains(i))return;a.classList.remove(i)}}function ee(a,i,s,n){var l=a.__styles??(a.__styles={});l[i]!==s&&(l[i]=s,s==null?a.style.removeProperty(i):a.style.setProperty(i,s,""))}var te=h('<div class="label-box svelte-1rle3va"> </div>'),ae=h('<div id="label-container" class="svelte-1rle3va"></div>'),se=h('<img id="upload-img" alt="" class="svelte-1rle3va">'),ie=h('<h1>Predict Image Labels</h1> <!> <div id="floating-box" class="svelte-1rle3va"><!> <div id="info" class="svelte-1rle3va">Image(png, jpg, jpeg) should be smaller than 5MB.</div> <div id="input-container" class="svelte-1rle3va"><input type="file" accept="image/jpg, image/jpeg, image/png" class="svelte-1rle3va"> <button class="svelte-1rle3va"> </button></div></div>',1);function ge(a,i){G(i,!1);let s,n=m(""),l=m(!1),p=m(!1),y=m(new Array(10).fill(0));function T(t){const e=t.target.files[0];e?(o(p,!1),s=e,o(n,URL.createObjectURL(s))):(s="",o(n,""))}async function k(){if(!s){alert("Please select an image first.");return}o(l,!0);const t=new FormData;t.append("file",s);try{const e=await fetch(`${Y}/fashion-mnist`,{method:"POST",body:t});if(!e.ok)throw new Error("Failed to process image");const c=await e.json();o(y,c.probs),o(p,!0)}catch(e){alert(e)}finally{o(l,!1)}}function B(t,e=.2){return t<e?e:t}const L=["T-shirt/top","Trouser","Pullover","Dress","Coat","Sandal","Shirt","Sneaker","Bag","Ankle boot"];X();var P=ie(),j=u(H(P),2);{var D=t=>{var e=ae();Q(e,5,()=>L,V,(c,E,I)=>{var g=te(),M=_(g);f(g),b(($,z)=>{ee(g,"opacity",$),x(M,`${r(E)??""}: ${z??""}%`)},[()=>B(r(y)[I]),()=>(r(y)[I]*100).toFixed(2)],U),v(c,g)}),f(e),v(t,e)},R=t=>{var e=N();b(c=>x(e,`Lables are [ ${c??""} ] (Fashion MNIST).`),[()=>L.join(", ")],U),v(t,e)};O(j,t=>{r(p)?t(D):t(R,!1)})}var w=u(j,2),F=_(w);{var q=t=>{var e=se();b(()=>{W(e,"src",r(n)),Z(e,"imgOpacity",r(l))}),v(t,e)};O(F,t=>{r(n)&&!r(p)&&t(q)})}var S=u(F,4),A=_(S);A.__change=T;var d=u(A,2);d.__click=k;var C=_(d,!0);f(d),f(S),f(w),b(()=>{d.disabled=r(l),x(C,r(l)?"Processing...":"Upload")}),v(a,P),J()}K(["change","click"]);export{ge as component};
